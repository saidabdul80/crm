import{aB as L,D as z,u as R,a6 as j,K as P,e as F,J as U,f as q,a3 as H,r as p,o as r,n as l,w as a,m as c,a as s,O as y,aa as M,ab as W,q as d,t as m,I as v}from"./main-9a914193.js";const K={props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:()=>{}}},emits:["loading"],setup(o,{emit:C}){const f=o,w=L();z();const S=R(),b=j(),g=P(),{t:i}=F(),I=U(),E=q(),x=H("utils");function B(e){return(e.status=="SENT"||e.status=="VIEWED")&&g.hasAbilities(y.SEND_INVOICE)}function $(e){return e.status=="DRAFT"&&I.name!=="invoices.view"&&g.hasAbilities(y.SEND_INVOICE)}async function _(e){b.openDialog({title:i("general.are_you_sure"),message:i("invoices.confirm_delete"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(n=>{e=e,n&&w.deleteInvoice({ids:[e]}).then(t=>{t.data.success&&(E.push("/admin/invoices"),f.table&&f.table.refresh(),w.$patch(h=>{h.selectedInvoices=[],h.selectAllField=!1}))})})}async function A(e){b.openDialog({title:i("general.are_you_sure"),message:i("invoices.confirm_clone"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(n=>{n&&w.cloneInvoice(e).then(t=>{E.push(`/admin/invoices/${t.data.data.id}/edit`)})})}async function T(e){b.openDialog({title:i("general.are_you_sure"),message:i("invoices.invoice_mark_as_sent"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(n=>{const t={id:e,status:"SENT"};n&&w.markAsSent(t).then(h=>{f.table&&f.table.refresh()})})}async function N(e){C("loading",!0),await w.sendInvoice({id:e.id,to:e.customer.email,body:"-",from:"admin@gmail.com",subject:"New Invoice"}),C("loading",!1)}function V(){let e=`${window.location.origin}/invoices/pdf/${f.row.unique_hash}`;x.copyTextToClipboard(e),S.showNotification({type:"success",message:i("general.copied_pdf_url_clipboard")})}return(e,n)=>{const t=p("BaseIcon"),h=p("BaseButton"),u=p("BaseDropdownItem"),D=p("router-link"),O=p("BaseDropdown");return r(),l(O,null,{activator:a(()=>[c(I).name==="invoices.view"?(r(),l(h,{key:0,variant:"primary"},{default:a(()=>[s(t,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(r(),l(t,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:a(()=>[c(g).hasAbilities(c(y).EDIT_INVOICE)?(r(),l(D,{key:0,to:`/admin/invoices/${o.row.id}/edit`},{default:a(()=>[M(s(u,null,{default:a(()=>[s(t,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.edit")),1)]),_:1},512),[[W,o.row.allow_edit]])]),_:1},8,["to"])):v("",!0),c(I).name==="invoices.view"?(r(),l(u,{key:1,onClick:V},{default:a(()=>[s(t,{name:"LinkIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.copy_pdf_url")),1)]),_:1})):v("",!0),c(I).name!=="invoices.view"&&c(g).hasAbilities(c(y).VIEW_INVOICE)?(r(),l(D,{key:2,to:`/admin/invoices/${o.row.id}/view`},{default:a(()=>[s(u,null,{default:a(()=>[s(t,{name:"EyeIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.view")),1)]),_:1})]),_:1},8,["to"])):v("",!0),$(o.row)?(r(),l(u,{key:3,onClick:n[0]||(n[0]=k=>N(o.row))},{default:a(()=>[s(t,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.send_invoice")),1)]),_:1})):v("",!0),B(o.row)?(r(),l(u,{key:4,onClick:n[1]||(n[1]=k=>N(o.row))},{default:a(()=>[s(t,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.resend_invoice")),1)]),_:1})):v("",!0),s(D,{to:`/admin/payments/${o.row.id}/create`},{default:a(()=>[o.row.status=="SENT"&&c(I).name!=="invoices.view"?(r(),l(u,{key:0},{default:a(()=>[s(t,{name:"CreditCardIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.record_payment")),1)]),_:1})):v("",!0)]),_:1},8,["to"]),$(o.row)?(r(),l(u,{key:5,onClick:n[2]||(n[2]=k=>T(o.row.id))},{default:a(()=>[s(t,{name:"CheckCircleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.mark_as_sent")),1)]),_:1})):v("",!0),c(g).hasAbilities(c(y).CREATE_INVOICE)?(r(),l(u,{key:6,onClick:n[3]||(n[3]=k=>A(o.row))},{default:a(()=>[s(t,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.clone_invoice")),1)]),_:1})):v("",!0),c(g).hasAbilities(c(y).DELETE_INVOICE)?(r(),l(u,{key:7,onClick:n[4]||(n[4]=k=>_(o.row.id))},{default:a(()=>[s(t,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.delete")),1)]),_:1})):v("",!0)]),_:1})}}};export{K as _};
