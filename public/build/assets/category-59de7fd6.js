import{a2 as l,v as i,$ as r,u as c}from"./main-9a914193.js";const m=(d=!1)=>{const h=d?window.pinia.defineStore:l,{global:s}=window.i18n;return h({id:"category",state:()=>({categories:[],currentCategory:{id:null,name:"",description:""},editCategory:null}),getters:{isEdit:t=>!!t.currentCategory.id},actions:{fetchCategories(t){return new Promise((o,a)=>{i.get("/api/v1/categories",{params:t,headers:{Authorization:`Bearer ${localStorage.getItem("auth.token")}`}}).then(e=>{this.categories=e.data.data,o(e)}).catch(e=>{r(e),a(e)})})},fetchCategory(t){return new Promise((o,a)=>{i.get(`/api/v1/categories/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth.token")}`}}).then(e=>{this.currentCategory=e.data.data,o(e)}).catch(e=>{r(e),a(e)})})},addCategory(t){return new Promise((o,a)=>{i.post("/api/v1/categories",t,{headers:{Authorization:`Bearer ${localStorage.getItem("auth.token")}`}}).then(e=>{this.categories.push(e.data.data),c().showNotification({type:"success",message:s.t("settings.expense_category.created_message")}),o(e)}).catch(e=>{r(e),a(e)})})},updateCategory(t){return new Promise((o,a)=>{i.put(`/api/v1/categories/${t.id}`,t,{headers:{Authorization:`Bearer ${localStorage.getItem("auth.token")}`}}).then(e=>{if(e.data){let n=this.categories.findIndex(u=>u.id===e.data.data.id);this.categories[n]=t.categories,c().showNotification({type:"success",message:s.t("settings.expense_category.updated_message")})}o(e)}).catch(e=>{r(e),a(e)})})},deleteCategory(t){return new Promise(o=>{i.delete(`/api/v1/categories/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth.token")}`}}).then(a=>{let e=this.categories.findIndex(g=>g.id===t);this.categories.splice(e,1),c().showNotification({type:"success",message:s.t("settings.expense_category.deleted_message")}),o(a)}).catch(a=>{r(a),console.error(a)})})}}})()};export{m as u};
